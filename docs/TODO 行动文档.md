TODO 行动文档

### **第一阶段：环境与核心配置** ✅ **已完成**

* [x] 全局安装 `ganache`: `npm install -g ganache`。
* [x] 确定一个12词的**项目助记词**，并写入`README.md`。
  * **实现说明**: 生成了有效的BIP39助记词：`bulk tonight audit hover toddler orange boost twenty biology flower govern soldier`
  * **原因**: 原助记词不符合BIP39标准，重新生成了有效助记词
* [x] 在`package.json`中或创建一个`start-chain.sh`脚本，配置好启动Ganache的最终命令:
  * **实现说明**: 创建了多种启动方式
    - `npm run start-chain` - CLI方式启动
    - `start-dev.sh` - 一键开发环境脚本  
    - `npm run start-chain-desktop` - 桌面端配置说明
  * **改进**: 提供了CLI和桌面端两种方式，增强了灵活性
* [x] 初始化FastAPI后端项目和`requirements.txt`。
* [x] 初始化Vue/React前端项目。
  * **实现说明**: 创建了基础Vue项目结构，待第二阶段后实际开发
* [x] 将所有预备资产（模型包、数据文件）放入后端的`assets`目录下。
  * **实现说明**: 
    - 模型文件放入 `backend/assets/model_package/`
    - 数据文件放入 `backend/assets/data/`
    - 创建了完整的配置管理 `backend/config.py`

**第一阶段额外完成项**:
* [x] 创建完整的测试框架 (`test/` 目录)
* [x] 实现项目验证脚本 (`npm run test`)
* [x] 优化项目文档结构
* [x] 创建开发环境自动化脚本

### **第二阶段：后端开发** ✅ **已完成**

* [x] 配置FastAPI，使其`Web3`实例连接到本地Ganache (`http://127.0.0.1:8545`)。
  * **实现说明**: 完整的Web3Manager集成，支持确定性账户生成和余额管理
* [x] 从Ganache启动日志中复制**固定的**Manager和金库账户的地址与私钥，作为后端的配置项。
  * **实现说明**: 使用BIP39助记词生成确定性账户，无需复制地址
* [x] **核心**: 创建`ai_module.py`，编写逻辑在应用启动时**加载预打包的模型文件**。
  * **实现说明**: 完整的model_loader.py，支持真实Ensemble_Hybrid模型加载
  * **改进**: 解决了sklearn版本兼容性问题，使用joblib替代pickle
* [x] 在后端启动时，**加载预抽样的攻击数据**`inference_data.pt`。
  * **实现说明**: 成功加载230个真实攻击样本，支持随机采样模拟
* [x] 实现数据库模型 (`proposals`, `execution_logs`)及初始化。
  * **实现说明**: SQLite数据库，包含ThreatDetectionLog, Proposal, ExecutionLog模型
* [x] 开发**"模拟攻击"API**并实现完整的**分级响应逻辑**。
  * **实现说明**: POST /api/attack/simulate，支持4级响应逻辑
* [x] 开发**手动/自动提案**的相关API。
  * **实现说明**: 自动提案创建和手动提案创建API
* [x] 开发**提案签名**API。
  * **实现说明**: POST /api/proposals/{id}/sign，支持2/3多重签名
* [x] 开发**"提案执行与激励"**逻辑 (从金库转账ETH)。
  * **实现说明**: 完整的奖励系统，0.01 ETH奖励给最终签名者

**第二阶段额外完成项**:
* [x] 完整的API端点测试套件 (`test_phase2_fixed.sh`)
* [x] 系统状态监控API (`/api/system/status`)  
* [x] 审计日志API (`/api/logs/detections`, `/api/logs/executions`)
* [x] 奖励发送测试API (`/api/test/reward`)
* [x] 修复预处理器版本兼容性问题
* [x] 优化提案排序和ID获取逻辑

### **第三阶段：前端可视化开发** ✅ **已完成**

* [x] 实现无状态的"角色切换器"。
  * **实现说明**: 创建RoleSwitch组件，支持Operator/Manager角色切换，使用localStorage持久化
* [x] 开发**账户信息看板**组件，轮询后端API以展示余额和持续增长的区块高度。
  * **实现说明**: Dashboard页面实现完整的账户信息展示，5秒自动刷新系统状态
* [x] 开发**账户列表模拟**组件 (纯前端功能)。
  * **改进**: 不仅是纯前端功能，实现了真实的Web3账户创建和Treasury转账功能
* [x] 开发威胁告警、提案卡片、历史记录等核心可视化组件。
  * **实现说明**: 完整的威胁检测页面、提案管理界面、历史记录展示
* [x] 联调所有API，完成端到端流程。
  * **实现说明**: 所有API联调成功，端到端流程完整可用

**第三阶段额外完成项**:
* [x] Vue 3 + Vite现代化前端框架搭建
* [x] 完整的组件化架构设计
* [x] 响应式UI设计，适配不同屏幕尺寸
* [x] 真实的Web3账户创建和资金管理功能
* [x] 实时数据更新和轮询机制
* [x] 详细的日志详情模态框组件
* [x] CSV数据导出功能
* [x] 完善的错误处理和用户体验

### **第四阶段：集成测试与交付** ✅ **已完成**

* [x] 进行端到端手动测试，确保所有业务逻辑正确。
  * **实现说明**: test_phase2_fixed.sh测试脚本验证所有功能正常
* [x] 编写`README.md`，清晰说明如何安装依赖、如何启动Ganache、后端和前端，以及如何进行演示。
  * **实现说明**: 完整的README文档，包含Phase 3启动指南
* [x] 清理代码，准备最终交付。
  * **实现说明**: 创建start-phase3.sh一键启动脚本，完善项目文档

**第四阶段额外完成项**:
* [x] 创建完整的前端项目文档
* [x] 实现一键启动脚本 (start-phase3.sh)
* [x] 完整的开发和部署说明文档
* [x] 系统演示准备完成

### **第五阶段：界面国际化** ✅ **已完成**

* [x] 前端界面完全英文化
  * **实现说明**: 所有Vue组件中的中文文本转换为英文
* [x] 组件文本更新
  * **实现说明**: 更新AccountList, ProposalCard, ThreatAlert, LogDetailsModal, History组件
* [x] 状态映射英文化
  * **实现说明**: 所有状态、级别、操作类型的中英文映射完成
* [x] 错误信息英文化
  * **实现说明**: 所有alert和console.error信息转换为英文
* [x] 文档更新
  * **实现说明**: 更新CLAUDE.md记录当前状态和下一步计划

### **第六阶段：自定义MultiSig智能合约集成** ✅ **已完成**

* [x] **智能合约开发**
  * **实现说明**: 创建 `MultiSigProposal.sol` 智能合约，支持2/3多重签名
* [x] **合约部署和配置**
  * **实现说明**: 使用 `deploy_multisig_simple.js` 部署合约到Ganache
  * **合约地址**: `0x5FbDB2315678afecb367f032d93F642f64180aa3`
* [x] **Python集成模块**
  * **实现说明**: 创建 `multisig_contract.py` 实现后端与合约交互
* [x] **提案创建升级**
  * **实现说明**: AI检测自动创建链上MultiSig提案，替代传统数据库模式
* [x] **签名流程优化**
  * **实现说明**: Manager签名直接与智能合约交互，支持自动执行
* [x] **奖励自动化**
  * **实现说明**: 合约自动发送ETH奖励给最终签名者
* [x] **事件日志集成**
  * **实现说明**: 完整的链上审计日志，通过智能合约事件实现

**第六阶段额外完成项**:
* [x] 合约接口文档和配置文件 (`multisig_interface.json`)
* [x] 部署脚本自动化 (`deploy_multisig.js`, `deploy_multisig_simple.js`)
* [x] 向后兼容的双重签名系统（数据库+合约）
* [x] 完整的智能合约测试和验证

### **第七阶段：奖金池机制实现** ✅ **Phase A完成 (2-3天)**

**解决博弈论问题:** ✅
- [x] 当前"最终签名者获奖"机制导致Manager延迟签名等待成为最后一个 - 已解决
- [x] 实现基于贡献度的奖金池分配系统 - 已实现
- [x] 建立公平的长期激励机制 - 已建立

**Phase 7.1: 智能合约奖金池系统** ✅
- [x] 修改MultiSigProposal.sol添加奖金池管理功能
- [x] 实现贡献度记录结构(签名次数、响应时间、质量评分)
- [x] 添加奖金池充值、提取和分配函数
- [x] 设计自动奖励分配机制（改为提案执行时触发）

**Phase 7.2: 后端奖金池集成** ✅
- [x] 更新Web3Manager支持奖金池操作
- [x] 修改Services添加贡献度统计业务逻辑
- [x] 扩展数据库模型添加奖金池和贡献记录表
- [x] 实现自动奖励分配任务（提案执行完成时触发）

**Phase 7.3: 前端奖金池界面** ✅
- [x] 更新Dashboard显示奖金池当前余额和统计
- [x] 添加Manager贡献度排行榜和历史记录
- [x] 实现奖金池充值功能界面
- [x] 显示自动分配提示和算法说明

**Phase A完成额外项：**
- [x] 创建完整的奖金池算法说明文档（奖金池算法说明.md）
- [x] 实现0-100分质量评分算法（响应速度60% + 活跃度40%）
- [x] 实现0-100分贡献度计算算法（签名次数50% + 质量评分50%）
- [x] 系统启动时自动初始化100 ETH奖金池
- [x] 移除手动分配功能，保留充值功能

**Phase A问题修复项：**
- [x] 修复奖金池初始化和状态持久化问题
- [x] 修复Manager贡献度更新和状态保存问题  
- [x] 修复自动分配机制触发和返回值处理问题
- [x] 添加状态文件管理（reward_pool_state.json, contributions_state.json）
- [x] 完善自动分配测试API和错误处理

### **第八阶段：合约层角色权限分离** ✅ **Phase 8完成 (4-5天)**

**真正去中心化权限控制:**
- [x] 将角色验证从后端移至智能合约层
- [x] 实现合约级别的权限分离和访问控制
- [x] 整合原Phase 5的固定账户架构设计

**Phase 8.1: 智能合约角色系统重构** ✅
- [x] 重新设计MultiSigProposal.sol的访问控制系统
- [x] 添加isManager和isOperator映射及相应修饰符
- [x] 分离createProposal(onlyOperator)和signProposal(onlyManager)权限
- [x] 实现合约层面的角色管理函数

**Phase 8.2: 合约重新部署和配置** ✅
- [x] 创建新的部署脚本支持角色初始化
- [x] 重新部署智能合约并设置Manager和Operator角色
- [x] 更新合约配置文件和ABI接口
- [x] 迁移现有提案数据到新合约

**Phase 8.3: 后端权限简化** ✅
- [x] 移除后端API的复杂角色验证逻辑
- [x] 更新所有API端点信任合约权限验证
- [x] 修改multisig_contract.py适配新的角色系统
- [x] 简化Services中的权限判断代码

**Phase 8.4: 前端角色特定界面** ✅
- [x] 实现固定10账户结构(Manager_0-2, Treasury, Operator_0-5)
- [x] 基于当前账户自动识别和显示对应角色界面
- [x] Manager界面仅显示签署和监控功能
- [x] Operator界面仅显示创建和检测功能

**Phase 8额外完成项：**
- [x] 修复前后端响应级别映射不一致问题
- [x] 修复威胁类型显示问题（显示真实攻击类型而非错误预测）
- [x] 修复创建提案时缺少角色信息的问题
- [x] 修复提案数据结构中signed_by字段处理问题
- [x] 完整测试系统功能和端到端流程

### **第八点五阶段：提案拒绝系统** ✅ **已完成 (1天)**

**1-vote veto拒绝机制实现:**
- [x] **问题识别**: Proposal Management界面显示"Rejected"选项但Manager无Reject按钮 ✅
- [x] **设计决策**: 实现1-vote veto机制，任意单个Manager可立即拒绝提案 ✅
- [x] **数据库扩展**: 添加rejected_by和rejected_at字段追踪拒绝信息 ✅
- [x] **后端API**: 实现POST /api/proposals/{id}/reject端点和业务逻辑 ✅
- [x] **前端UI**: 添加Reject按钮、确认对话框和拒绝状态显示 ✅
- [x] **完整测试**: 验证拒绝功能正常工作，包括统计更新和审计追踪 ✅

**Phase 8.5.1: 数据库schema扩展** ✅
- [x] 添加Proposal.rejected_by字段存储拒绝者角色
- [x] 添加Proposal.rejected_at字段存储拒绝时间戳
- [x] 执行数据库迁移（SQLite ALTER TABLE）
- [x] 更新模型to_dict方法包含新字段

**Phase 8.5.2: 后端业务逻辑实现** ✅
- [x] ProposalService.reject_proposal()方法实现1-vote veto逻辑
- [x] POST /api/proposals/{id}/reject API端点
- [x] Manager角色验证和权限检查
- [x] 立即拒绝状态更新（无需等待其他Manager）

**Phase 8.5.3: 前端UI集成** ✅
- [x] ProposalCard组件添加❌ Reject按钮
- [x] 拒绝确认对话框（"Are you sure you want to reject..."）
- [x] 拒绝结果显示区域（显示拒绝者和时间）
- [x] 提案统计更新（Rejected计数）
- [x] 按钮状态管理（防止重复操作）

**第八点五阶段额外完成项：**
- [x] 修复API参数传递问题（从query parameter改为request body）
- [x] 完整的拒绝审计日志（who, when的完整记录）
- [x] 角色权限检查（只有Manager可以拒绝）
- [x] UI状态立即更新（拒绝后按钮消失，状态变更）
- [x] 统计数字实时更新（Pending减少，Rejected增加）

### **第九阶段：AI模型预测准确性修复** ✅ **Phase C (已完成)**

**问题诊断:**
- ✅ 确认模型训练本身成功（99.62%准确率）
- ✅ 识别严重系统bug：显示true_label而非模型预测结果
- ✅ 发现services.py中注释承认"使用true_label因为模型还有问题"

**Phase C.1: 新模型架构集成** ✅ **已完成**
- [x] 成功集成HierarchicalTransformerEnhancedEnsembleModel新架构
- [x] 升级特征维度从64维到77维，匹配新数据格式
- [x] 实现两阶段分类：二分类(Benign/Malicious) → 多分类(6恶意类别)
- [x] 集成多尺度注意力机制和不确定性量化

**Phase C.2: 关键Bug修复** ✅ **已完成**
- [x] 修复services.py中threat_type使用true_label的严重错误
- [x] 改为使用模型预测结果predicted_class
- [x] 解决JSON序列化numpy.float32类型问题
- [x] 修复feature维度不匹配和预处理重复问题

**Phase C.3: 数据处理优化** ✅ **已完成**
- [x] 使用新的77维推理数据/Users/zane/Desktop/BCFW/scripts/抽取脚本新.ipynb
- [x] 优化预处理流程，避免双重标准化
- [x] 实现is_preprocessed标志支持已预处理数据
- [x] 完善不同攻击类型的均衡采样(130 Benign + 80 attacks)

**Phase C.4: 端到端验证** ✅ **已完成**
- [x] Playwright自动化测试验证模型正确预测
- [x] 确认DoS攻击检测置信度96%，DDoS攻击检测97.9%
- [x] 验证前端正确显示模型预测结果而非训练标签
- [x] 测试不同威胁类型的准确识别和提案创建

**实际成果:**
- ✅ 模型预测准确率恢复，正确识别各种攻击类型
- ✅ 置信度分布合理，不再误判为"Benign" 
- ✅ 新HierarchicalTransformerEnhancedEnsembleModel成功替代旧模型
- ✅ 系统现在展示真实的AI预测结果，具备实际威胁检测能力

### **第九A阶段：Docker容器化部署** ✅ **完成 (2天)**

**全球用户一键部署支持:**
- [x] **单容器All-in-One架构**: 创建包含Ganache+后端+前端的完整Docker镜像
- [x] **前端API路由修复**: 解决生产环境中前端API无法访问后端的核心问题
- [x] **跨平台支持**: 支持ARM64 (Apple Silicon)和x86_64架构
- [x] **Docker Hub发布**: 镜像已成功推送到Docker Hub，全球用户可直接下载使用

**Phase 9A.1: Docker镜像构建** ✅
- [x] 创建Multi-stage Dockerfile优化镜像大小
- [x] 前端构建阶段：Node.js 22 + npm build
- [x] 运行环境阶段：Ubuntu 22.04 + Python 3.11 + Node.js 22
- [x] 智能启动脚本：docker-entrypoint.sh管理服务启动顺序

**Phase 9A.2: 生产环境API修复** ✅
- [x] **根本问题**: 前端使用`baseURL: '/api'`在生产环境无法路由到后端8000端口
- [x] **解决方案**: 动态API配置`baseURL: import.meta.env.PROD ? 'http://localhost:8000/api' : '/api'`
- [x] **测试验证**: Playwright全面测试所有功能（Dashboard、威胁检测、多签提案、奖励系统）

**Phase 9A.3: Docker Hub发布和验证** ✅
- [x] 镜像构建和功能验证完成
- [x] 推送到Docker Hub供全球用户下载
- [x] 跨平台兼容性测试通过
- [x] 一键部署命令确认：`docker run -d -p 5173:5173 -p 8000:8000 -p 8545:8545 [IMAGE_NAME]`

**系统现在支持两种部署方式:**
1. **开发模式**: `./start_system.sh` (本地环境)
2. **容器化部署**: `docker run` (全球用户一键部署)

### **第十阶段：网络可视化和动态节点管理** ✅ **已完成 (3-4天)**

**创建区块链网络模拟器般的可视化体验:**
- [x] 交互式网络拓扑可视化页面 ✅
- [x] 真实的节点创建和删除管理 ✅
- [x] 多种网络布局和攻击流程可视化 ✅

**Phase 10.1: 网络可视化架构** ✅ **已完成**
- [x] 创建基于HTML5 Canvas的网络渲染引擎
- [x] 实现Star、Grid、Circle、Random四种布局算法
- [x] 设计节点交互系统（点击、悬停、详情显示）
- [x] 实现连接线可视化和网络状态指示

**Phase 10.2: 节点管理系统** ✅ **已完成**
- [x] 开发真实节点创建API和前端界面
- [x] 实现安全节点删除机制（保护核心节点）
- [x] 添加节点详情查看和角色特定信息显示
- [x] 集成余额自动回收和Treasury管理

**Phase 10.3: 攻击流程可视化** ✅ **已完成**
- [x] 实现威胁检测→提案创建→签名→执行的可视化流程
- [x] 添加动画效果展示攻击传播路径
- [x] 创建流程步骤面板显示实时进度
- [x] 集成真实API数据和状态更新

**Phase 10.4: 实时更新优化** ✅ **已完成**
- [x] 修复前端节点数量统计更新问题
- [x] 实现Canvas响应式更新和重新渲染
- [x] 优化Vue响应式系统和数据绑定
- [x] 添加强制刷新机制和状态同步

**第十阶段额外完成项：**
- [x] 创建NetworkCanvas.vue专业Canvas组件
- [x] 实现NodeDetail.vue详情模态框组件
- [x] 添加节点类型图例和网络状态指示器
- [x] 完善节点创建表单验证和错误处理
- [x] 实现节点删除确认对话框和安全检查
- [x] 优化网络布局算法和视觉效果

### **第十一阶段：MetaMask Web3集成** **Phase 9 (7-10天)**

**实现真正的去中心化用户体验:**
- [ ] 用户直接控制私钥和交易签名
- [ ] 前端直接与智能合约交互
- [ ] 移除后端代理的中心化控制

**Phase 9.1: 前端Web3架构重构**
- [ ] 实现MetaMask连接和账户管理组件
- [ ] 重构Web3集成支持用户钱包直接交互
- [ ] 添加钱包状态管理和账户切换监听
- [ ] 设计交易确认和状态反馈界面

**Phase 9.2: 智能合约兼容性确保**
- [ ] 验证合约与外部钱包交互的兼容性
- [ ] 优化Gas费估算和交易参数设置
- [ ] 实现合约事件监听和状态同步
- [ ] 添加交易失败处理和重试机制

**Phase 9.3: 后端签名验证系统**
- [ ] 更新API支持MetaMask签名验证
- [ ] 实现链下签名验证和消息认证
- [ ] 添加用户身份验证和会话管理
- [ ] 保持传统模式的向后兼容性

**Phase 9.4: 用户体验优化**
- [ ] 设计直观的钱包连接引导流程
- [ ] 实现网络切换提示和错误处理
- [ ] 添加交易历史和状态追踪
- [ ] 提供MetaMask安装和配置指南

### **第十一阶段：用户体验竞争条件修复** ✅ **已完成 (1天)**

**问题诊断和修复:**
- [x] **用户体验问题确认**: 通过Playwright实际测试发现Manager签名后5秒等待时间问题 ✅
- [x] **根因分析**: 前端定时刷新与签名操作竞争条件，导致误导性"签名失败"提示 ✅
- [x] **API参数修复**: frontend/src/api/system.js中signProposal参数格式不匹配问题 ✅
- [x] **竞争条件解决**: 实现签名期间暂停刷新机制，防止状态冲突 ✅
- [x] **用户反馈优化**: 改进签名成功/失败消息，提供更准确的状态反馈 ✅
- [x] **视觉反馈增强**: 添加签名按钮emoji图标和加载状态 ✅

**Phase 11.1: 前端竞争条件修复** ✅
- [x] 修复API调用格式：JSON body → Query parameter
- [x] 实现防重复签名机制 (signingInProgress Set)
- [x] 添加签名期间自动刷新暂停功能
- [x] 优化签名按钮禁用条件和状态管理
- [x] 改进错误消息区分不同失败原因

**Phase 11.2: 用户反馈系统优化** ✅  
- [x] 替换双重对话框为单一明确消息
- [x] 区分中间签名vs最终执行的不同反馈
- [x] 添加视觉图标和加载动画效果
- [x] 增加提案执行后的奖励分配确认

**已修复的具体问题:**
- ✅ **API不匹配**: manager_index JSON → manager_role query parameter
- ✅ **误导性错误**: 成功操作显示"签名失败" → 准确状态反馈  
- ✅ **竞争条件**: 刷新冲突 → 签名期间暂停刷新
- ✅ **重复点击**: 并发签名 → 防重复机制
- ✅ **用户困惑**: 双重对话框 → 单一清晰消息

### **第十二阶段：系统脚本优化** ✅ **已完成 (1天)**

**系统启动脚本修复:**
- [x] **fuser命令兼容性问题**: 修复macOS与Linux fuser命令语法差异 ✅
- [x] **Ganache端口检查优化**: 改进端口响应检测，支持更稳定的区块链连接 ✅
- [x] **进程清理机制**: 优化system.sh的进程管理和端口清理逻辑 ✅
- [x] **错误信息消除**: 解决启动和停止时的fuser使用说明输出问题 ✅

**Phase 12.1: 脚本兼容性修复** ✅
- [x] 移除problematic fuser usage，使用lsof替代所有端口清理
- [x] 修复Ganache状态检测从特定chain ID检查改为通用JSON-RPC响应检查
- [x] 添加5秒超时防止curl命令挂起
- [x] 优化错误输出重定向和异常处理

**系统脚本现在完全兼容macOS环境，启动停止无错误信息。**

### **第十三阶段：用户体验深度优化** **[已计划]**

**阶段性实施方案 (基于实际测试结果):**

**Phase 13.1: 异步奖励处理 + 即时UI反馈** **[优先级：高]**
- [ ] **后端异步奖励系统**: 修改services.py将奖励分配从签名流程分离
- [ ] **后台任务处理**: 创建background_tasks.py处理异步奖励分配
- [ ] **即时响应优化**: 签名验证完成后立即返回，奖励在后台处理
- [ ] **前端状态管理**: 签名完成后立即更新UI，无需等待奖励交易
- [ ] **预期改善**: 用户等待时间从5秒减少到1秒内

**Phase 13.2: 进度指示器系统** **[优先级：中]**
- [ ] **后台操作可视化**: 为奖励分配过程添加进度指示
- [ ] **交易状态跟踪**: 实时显示区块链交易确认状态  
- [ ] **用户透明度**: 让用户了解后台操作进展
- [ ] **专业体验提升**: 减少用户对系统响应的不确定感

**Phase 13.3: WebSocket实时更新** **[优先级：低]**  
- [ ] **实时状态同步**: 消除轮询，实现即时状态更新
- [ ] **多用户协同**: 提供企业级多用户实时体验
- [ ] **高级功能**: 适合系统成熟后的进阶优化

**技术实施评估:**
- **Stage 1 (必需)**: 代码修改量中等，ROI最高，解决90%用户体验问题
- **Stage 2 (提升)**: 代码修改量中等，提升专业感，可选实施
- **Stage 3 (高级)**: 代码修改量大，企业级功能，当前可能过度工程

### **技术债务清理和系统完善**
- [x] 修复提案签署API参数不匹配问题 ✅
- [ ] 实现提案撤回功能和相关界面
- [ ] 统一提案数据格式，修复signed_by字段问题
- [ ] 完善错误处理和用户反馈机制
- [ ] 实现实时的提案状态更新和通知
- [ ] 优化账户选择器和角色提示界面